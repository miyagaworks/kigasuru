# アプリ全体像 v1.0
## 「上手くなる気がするぅぅぅ PRO」

**MVP版（最小実用版）- 傾斜ショット記録・分析特化**

作成日: 2025-10-02

---

## 開発方針

### 基本コンセプト
1. **段階的開発**: まず傾斜ショットの記録・分析を完璧にする
2. **実戦テスト**: 実際のラウンドで繰り返しテストし、改善
3. **機能追加**: 完成度を確認してから、パター分析等を追加

### MVP版の対象範囲
- ✅ **傾斜からのショット**: 完全対応
- ⬜️ **パッティング**: 後回し（将来実装）
- ✅ **ジャイロセンサー傾斜認識**: MVP版に含む
- ✅ **6次元データ記録**: 傾斜×クラブ×ライ×強度×風向き×気温

---

## コア機能（MVP版）

### 1. ラウンド開始

#### 1.1 自動環境設定
```
┌─────────────────────────┐
│ 📱 ラウンド開始          │
├─────────────────────────┤
│ [🎯 現在地で自動設定]    │
│                         │
│ 📍 GPS取得中...         │
│ 🌤 気象情報取得中...     │
├─────────────────────────┤
│ ✅ 設定完了！            │
│ 📍 つくばゴルフクラブ    │
│ 🌡 気温: 12°C (冬季)    │
│ 🌤 天気: 晴れ時々曇り    │
│                         │
│ [ラウンド開始]          │
└─────────────────────────┘
```

**自動取得項目**:
- GPS位置情報 → ゴルフ場特定
- 現在気温 → 季節設定（夏季/中間期/冬季）
- 天気状況

**オフライン対応**:
- ローカルキャッシュに保存
- 手動入力オプションあり

---

### 2. ショット記録（6次元入力）

#### 2.1 入力フロー

**標準6タップ入力**

```
【タップ1】傾斜選択
┌─────────────────────────┐
│ 📱 傾斜自動認識モード    │
│ [自動認識] [手動入力]    │
├─────────────────────────┤
│ スマホを地面に置いて     │
│ 目標方向に向けてください │
│                         │
│ [測定開始]              │
└─────────────────────────┘

↓ 自動認識結果

┌─────────────────────────┐
│ ✅ 認識完了！            │
│ 傾斜: 左足上がり         │
│      +つま先上がり      │
│                         │
│ X軸: +3.2° (左右)       │
│ Y軸: +4.1° (前後)       │
│                         │
│ [確定] [再測定] [手動]   │
└─────────────────────────┘

【タップ2】クラブ選択
┌─────────────────────────┐
│ よく使うクラブ           │
│ [7I] [PW] [9I] [6I]     │
│ 68%  45%  34%  28%      │
├─────────────────────────┤
│ 全クラブから選択 ▼       │
└─────────────────────────┘

【タップ3】ライ選択
┌─────────────────────────┐
│ [✨A級] [🌱B級] [🌿C級] │
│ 好条件   軽ラフ  深ラフ  │
│                         │
│ [📦目玉] [🏖️ベア] [🍂悪] │
└─────────────────────────┘

【タップ4】ショット強度
┌─────────────────────────┐
│ [💪 フル] [😐 普通] [🤏 ソフト] │
│   100%     80%      60%      │
└─────────────────────────┘

【タップ5】風向き
┌─────────────────────────┐
│ [🌪️無風] [⬆️アゲ] [⬇️フォロー] │
│ [⬅️左風] [➡️右風] [🌀複雑]     │
└─────────────────────────┘

【タップ6】結果記録（ターゲットボード）
┌─────────────────────────┐
│ 7I・左上+つま先上・B級   │
│ 80%・アゲ・冬・想定94Y    │
├─────────────────────────┤
│       12時(ピン)         │
│    [🟢] [🟢] [🟢]        │
│ 9時[🟡] [⭕] [🟢] 3時    │
│    [🟠] [🟡] [🟢]        │
│       6時(手前)          │
├─────────────────────────┤
│ [💾 保存] [↶ 修正]      │
└─────────────────────────┘
```

**距離・方向入力**:
- ターゲットボードをタップ
- 色で距離区分を自動判定
  - 🟢 ジャスト: ±10Y以内
  - 🟡 ショート: -10～-30Y
  - 🟠 大ショート: -30Y以上
  - 🔵 オーバー: +10～+30Y
  - 🟣 大オーバー: +30Y以上

---

#### 2.2 時短入力（プリセット）

**ワンタッププリセット**

```
┌─────────────────────────┐
│ 🔥 よく使うパターン      │
├─────────────────────────┤
│ 🏔️↗️ 7I 🌱 80% ⬆️ ❄️    │
│ 左足上がり・7I・軽ラフ   │
│ 80%ショット・アゲ・冬    │
│ 使用回数: 42回           │
│                         │
│ [このパターンで記録]     │
└─────────────────────────┘

↓ タップ後

┌─────────────────────────┐
│ 5次元自動入力完了！      │
│ 残り: 結果入力のみ       │
│                         │
│ [結果を記録 →]          │
└─────────────────────────┘
```

**実質2タップで記録完了**:
1. プリセット選択（5次元自動入力）
2. ターゲットボード（結果記録）

---

### 3. データ分析

#### 3.1 基本統計

```
┌─────────────────────────┐
│ 📊 7番アイアン分析       │
├─────────────────────────┤
│ 総ショット数: 127回      │
│ 成功率: 68%             │
│                         │
│ 【傾斜別成功率】         │
│ 平坦:         78% (32回) │
│ 左足上がり:   65% (45回) │
│ 左足下がり:   52% (18回) │
│ つま先上がり: 61% (21回) │
│ つま先下がり: 58% (11回) │
│                         │
│ 【ライ別成功率】         │
│ A級（好条件）: 78%      │
│ B級（軽ラフ）: 65%      │
│ C級（深ラフ）: 31% ⚠️   │
│                         │
│ 【風向き別成功率】       │
│ 無風:         72%       │
│ アゲインスト: 58%       │
│ フォロー:     81%       │
└─────────────────────────┘
```

#### 3.2 複合条件分析

```
┌─────────────────────────┐
│ 🔍 複合条件での傾向      │
├─────────────────────────┤
│ 左足上がり + 深ラフ      │
│ 成功率: 18% 🚨          │
│ 平均誤差: -22Y          │
│                         │
│ 💡 最適戦略:            │
│ 6I・80%ショット推奨     │
│ (成功率: 68%)           │
└─────────────────────────┘
```

#### 3.3 トレンド分析

```
┌─────────────────────────┐
│ 📈 上達の推移            │
├─────────────────────────┤
│ 7I・左足上がり・B級ライ  │
│                         │
│ 1-3回目:   成功率 32%   │
│ 4-6回目:   成功率 51%   │
│ 7-9回目:   成功率 68%   │
│ 10回目以降: 成功率 72%   │
│                         │
│ ✅ 学習効果が顕著！      │
└─────────────────────────┘
```

---

### 4. データ構造

#### 4.1 ショットデータ

```json
{
  "shot_id": "20251002_001",
  "round_id": "round_20251002_001",
  "timestamp": "2025-10-02T14:30:00Z",

  "course": {
    "name": "つくばゴルフクラブ",
    "hole": 7,
    "par": 4
  },

  "conditions": {
    "season": "冬季",
    "temperature": 12,
    "weather": "晴れ時々曇り"
  },

  "shot_data": {
    "slope": {
      "type": "左足上がり+つま先上がり",
      "x_angle": 3.2,
      "y_angle": 4.1,
      "auto_detected": true
    },
    "club": "7I",
    "lie": "B級（軽ラフ）",
    "strength": 80,
    "wind": "アゲインスト",

    "expected_distance": 94,
    "actual_distance": 91,
    "direction": "12時",

    "distance_error": -3,
    "distance_category": "ジャスト",
    "success": true
  },

  "feeling": {
    "condition": "普通",
    "confidence": "自信",
    "result_feeling": "想定通り"
  }
}
```

---

## 技術スタック

### フロントエンド（Web版）
- **フレームワーク**: React 18 + Vite
- **状態管理**: Zustand
- **ルーティング**: React Router
- **UI**: TailwindCSS + カスタムコンポーネント
- **アイコン**: 自作SVGアイコン

### センサーAPI
- **DeviceOrientation API**: ジャイロ傾斜認識
- **DeviceMotion API**: 加速度センサー
- **Geolocation API**: GPS位置情報

### ローカルストレージ
- **IndexedDB / Dexie.js**: オフラインデータベース
- **LocalStorage**: 設定データ

### データ分析
- **統計処理**: ローカル計算（平均・標準偏差等）
- **パターン検出**: ルールベースアルゴリズム

---

## 画面構成

### 1. ホーム画面
```
┌─────────────────────────┐
│ 🏌️ 上手くなる気がするぅぅぅ │
├─────────────────────────┤
│ [新しいラウンド開始]     │
│                         │
│ 📊 最近のラウンド        │
│ • 10/2 つくばGC  88打   │
│ • 9/25 桜CC      92打   │
│                         │
│ 📈 クイック統計          │
│ 7I 成功率: 68% ↑        │
│ PW 成功率: 72% →        │
└─────────────────────────┘

[🏠ホーム] [📝記録] [📊分析] [⚙️設定]
```

### 2. ショット記録画面
```
┌─────────────────────────┐
│ ← ショット記録           │
├─────────────────────────┤
│ ホール: 7番 Par4         │
│ つくばGC / 冬季 12°C     │
├─────────────────────────┤
│                         │
│ [ステップ1/6: 傾斜選択]  │
│                         │
│ [自動認識] [手動入力]    │
│                         │
└─────────────────────────┘
```

### 3. 分析画面
```
┌─────────────────────────┐
│ ← 分析                  │
├─────────────────────────┤
│ [クラブ別] [傾斜別] [ライ別] │
│                         │
│ 📊 7番アイアン           │
│                         │
│ 成功率: 68%             │
│ 総ショット: 127回        │
│                         │
│ [詳細を見る →]          │
└─────────────────────────┘
```

### 4. 設定画面
```
┌─────────────────────────┐
│ ← 設定                  │
├─────────────────────────┤
│ プロフィール設定         │
│ • 右打ち / 左打ち        │
│ • 7I基準飛距離設定       │
│                         │
│ センサー設定             │
│ • ジャイロキャリブレーション │
│                         │
│ データ管理               │
│ • データエクスポート      │
│ • データインポート        │
└─────────────────────────┘
```

---

## 開発ロードマップ

### Phase 1: MVP版開発（1-2ヶ月）
**目標**: 傾斜ショット記録・分析を完璧に

#### Week 1-2: 基盤構築
- [ ] プロジェクトセットアップ（React + Vite）
- [ ] ディレクトリ構造作成
- [ ] 基本コンポーネント作成
- [ ] ルーティング設定

#### Week 3-4: ジャイロセンサー実装
- [ ] DeviceOrientation API実装
- [ ] 傾斜自動認識アルゴリズム
- [ ] キャリブレーション機能
- [ ] 実機テスト

#### Week 5-6: データ記録機能
- [ ] 6次元入力UI
- [ ] IndexedDB設定
- [ ] ターゲットボード実装
- [ ] プリセット機能

#### Week 7-8: 分析機能
- [ ] 基本統計計算
- [ ] 複合条件分析
- [ ] トレンド分析
- [ ] グラフ表示

### Phase 2: 実戦テスト（1ヶ月）
- [ ] 実際のラウンドで10回以上テスト
- [ ] UX改善（入力速度・視認性）
- [ ] バグ修正
- [ ] パフォーマンス最適化

### Phase 3: 機能追加（将来）
- [ ] パッティング分析
- [ ] ドライビング分析
- [ ] コースマネジメント提案
- [ ] データシェア機能

---

## 成功基準（MVP版）

### 1. 機能面
- ✅ ジャイロセンサーで8方向傾斜を自動認識
- ✅ オフラインで完全動作
- ✅ 平均入力時間25秒以内（標準）
- ✅ 平均入力時間12秒以内（プリセット）

### 2. データ精度
- ✅ 傾斜認識精度: ±0.5度以内
- ✅ データ記録率: 95%以上
- ✅ 6次元完全記録率: 90%以上

### 3. ユーザビリティ
- ✅ 手袋着用時でも操作可能
- ✅ 直射日光下でも視認可能
- ✅ ラウンド中の操作が快適

### 4. パフォーマンス
- ✅ 初回ロード: 3秒以内
- ✅ 画面遷移: 200ms以内
- ✅ バッテリー消費: 1ラウンドで20%以内

---

## 次のステップ

1. ✅ 全アイコン作成完了（96個）
2. ⬜️ プロジェクトセットアップ
3. ⬜️ 基本コンポーネント作成
4. ⬜️ ジャイロセンサー実装

---

最終更新: 2025-10-02
